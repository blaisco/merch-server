<%= errors_for(@product) %>

<fieldset>
  <div class="clearfix">
    <label>Name</label>
    <div class="input">
      <span class="uneditable-input"><%= @product.name %></span>
    </div>
  </div>
  
  <div class="clearfix">
    <label>Description</label>
    <div class="input">
      <span class="uneditable-input" style="width: 460px;"><%= @product.description %></span>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :merchant_id %>
    <div class="input">
      <%= form.select :merchant_id, merchant_options_for_select(@product.merchant_id), {:prompt => true} %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :merchandisable_string, "Merchandisable" %>
    <div class="input">
      <%= form.select :merchandisable_string, merchandisable_grouped_options(@product.merchandisable), {:prompt => true} %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :product_types, "Product Types" %>
    <div id="product_types">
      <% @product.product_types.each_with_index do |product_type, index| %>
        <%= render "product_type_fields", :form => form, :product_type => product_type, :index => index %>
      <% end %>
    </div>
    <div class="input action">
      <%= add_child_object_link(form, @product, :product_type) %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :status %>
    <div class="input">
      <ul class="inputs-list">
        <% Product::STATUSES.each do |status| %>
        <li>
          <label>
            <%= form.radio_button :status, status, { :checked => @product.status == status } %>
            <span><%= status.capitalize %></span>
          </label>
        </li>
        <% end %>
      </ul>
    </div>
  </div>

  <div class="clearfix">
    <%# form.label :franchise_id %>
    <div class="input">
      <%# form.select :franchise_id, options_for_select(Franchise.all.map { |franchise| [franchise.name, franchise.id] }, @product.franchise_id)%>
    </div>
  </div>
  
  <div class="clearfix">
    <%# form.label :product_type_id %>
    <div class="input">
      <%# form.select :product_type_id, options_for_select(ProductType.all.map { |cat| [cat.name, cat.id] }, @product.product_type_id)%>
    </div>
  </div>
  
  <div class="actions">
    <%= form.submit @product.persisted? ? "Update Product" : "Create Product", :class => "primary btn" %>
  </div>
</fieldset>

<%= content_for :footer do %>
<script>
  $(function() {
    // do stuff
  });
</script>
<% end %>
