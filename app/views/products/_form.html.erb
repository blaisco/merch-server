<%= errors_for(@product) %>

<fieldset>
  <div class="clearfix">
    <label>Name</label>
    <div class="input">
      <span class="uneditable-input" style="width: 460px;"><%= @product.name %></span>
    </div>
  </div>
  
  <div class="clearfix">
    <label>Description</label>
    <div class="input">
      <span class="uneditable-input" style="width: 460px;"><%= @product.description %></span>
    </div>
  </div>
  
  <div class="clearfix">
    <label>URL</label>
    <div class="input">
      <span class="uneditable-input" style="width: 460px;"><%= link_to @product.url, @product.url %></span>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :merchant_id %>
    <div class="input">
      <%= form.select :merchant_id, merchant_options_for_select(@product.merchant_id), {:prompt => true} %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :merchandisable_string, "Game/Dev/Series" %>
    <div class="input">
      <%= form.select :merchandisable_string, merchandisable_grouped_options(@product.merchandisable), {:prompt => true} %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :product_types, "Product Types" %>
    <div id="typifications">
      <% @product.typifications.each_with_index do |typification, index| %>
        <%= render "typification_fields", :form => form, :typification => typification, :index => index %>
      <% end %>
    </div>
    <div class="input action">
      <%= add_child_object_link(form, @product, :typification, "Product Type") %>
    </div>
  </div>
  
  <div class="clearfix">
    <%= form.label :status %>
    <div class="input">
      <ul class="inputs-list">
        <% Product::STATUSES.each do |status| %>
        <li>
          <label>
            <%= form.radio_button :status, status, { :checked => @product.status == status } %>
            <% indicators = { "active" => "success", "inactive" => "important", "pending" => ""} %>
            <span class="label <%= indicators[status] %>"><%= status.capitalize %></span>
          </label>
        </li>
        <% end %>
      </ul>
    </div>
  </div>

  <div class="clearfix">
    <%# form.label :franchise_id %>
    <div class="input">
      <%# form.select :franchise_id, options_for_select(Franchise.all.map { |franchise| [franchise.name, franchise.id] }, @product.franchise_id)%>
    </div>
  </div>
  
  <div class="clearfix">
    <%# form.label :product_type_id %>
    <div class="input">
      <%# form.select :product_type_id, options_for_select(ProductType.all.map { |cat| [cat.name, cat.id] }, @product.product_type_id)%>
    </div>
  </div>
  
  <div class="actions">
    <%= form.submit @product.persisted? ? "Update & View" : "Create Product", :class => "success btn" %>
    <%= form.submit "Update & Next Product", :name => "next", :class => "primary btn" if @product.persisted? %>
  </div>
</fieldset>
