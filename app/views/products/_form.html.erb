<%= errors_for(@product) %>

<fieldset>
  <div class="row">
    <div class="span12">

      <div class="clearfix">
        <label>Name</label>
        <div class="input">
          <span class="uneditable-input" style="width: 460px;"><%= @product.name %></span>
        </div>
      </div>
      
      <div class="clearfix">
        <label>Description</label>
        <div class="input">
          <span class="uneditable-input" style="width: 460px;"><%= @product.description %></span>
        </div>
      </div>
      
      <div class="clearfix">
        <label>URL</label>
        <div class="input">
          <span class="uneditable-input" style="width: 460px;"><%= link_to @product.url, @product.url %></span>
        </div>
      </div>
      
      <div class="clearfix">
        <label>Merchant</label>
        <div class="input">
          <span class="uneditable-input" style="width: 460px;"><%= @product.merchant.name %> <%= link_to "(edit)", edit_merchant_path(@product.merchant), :class => "pull-right" %></span>
        </div>
      </div>
      
      <div class="clearfix">
        <%= form.label :merchandisable_string, "Game/Dev/Series" %>
        <div class="input">
          <%= form.select :merchandisable_string, merchandisable_grouped_options(@product.merchandisable), {:prompt => true} %>
        </div>
      </div>
      
      <div class="clearfix">
        <%= form.label :product_types, "Product Types" %>
        <div id="typifications">
          <% @product.typifications.each_with_index do |typification, index| %>
            <%= render "typification_fields", :form => form, :typification => typification, :index => index %>
          <% end %>
        </div>
        <div class="input action">
          <%= add_child_object_link(form, @product, :typification, "Product Type") %>
        </div>
      </div>
      
      <div class="clearfix">
        <%= form.label :status %>
        <div class="input">
          <ul class="inputs-list">
            <% Product::STATUSES.each do |status, value| %>
            <li>
              <label>
                <%= form.radio_button :status, value, { :checked => @product.status == value } %>
                <% indicators = { "approved" => "success", "denied" => "important", "pending" => ""} %>
                <span class="label <%= indicators[status.to_s] %>"><%= status.to_s %></span>
              </label>
            </li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <div class="span4">
      <%= image_tag(@product.primary_image.data(:small), :alt => @product.name, :class => "pull-right") %>
    </div>
  </div>
  
  <div class="actions">
    <%= form.submit @product.persisted? ? "Update & View" : "Create Product", :class => "success btn" %>
    <%= form.submit "Update & Next Product", :name => "next", :class => "primary btn" if @product.persisted? %>
  </div>
</fieldset>
